
> teacher-observation@1.0.0 dev
> next dev --turbopack

 ⚠ Warning: Found multiple lockfiles. Selecting /Users/user/pnpm-lock.yaml.
   Consider removing the lockfiles at:
   * /Users/user/Desktop/apps/MENTOR/package-lock.json

   ▲ Next.js 15.4.4 (Turbopack)
   - Local:        http://localhost:3000
   - Network:      http://192.168.1.117:3000
   - Environments: .env.local, .env

 ✓ Starting...
 ✓ Compiled middleware in 286ms
 ✓ Ready in 3.4s
 ⚠ Webpack is configured while Turbopack is not, which may cause problems.
 ⚠ See instructions if you need to configure Turbopack:
  https://nextjs.org/docs/app/api-reference/next-config-js/turbopack

 ○ Compiling /api/auth/login ...
 ✓ Compiled /api/auth/login in 6.7s
Login attempt for: chhinhs@gmail.com
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."password", "public"."users"."name", "public"."users"."role", "public"."users"."auth_provider", "public"."users"."telegram_id", "public"."users"."telegram_username", "public"."users"."telegram_photo_url", "public"."users"."is_active", "public"."users"."created_at", "public"."users"."updated_at" FROM "public"."users" WHERE ("public"."users"."email" = $1 AND 1=1) LIMIT $2 OFFSET $3
User found: chhinhs@gmail.com Active: true
Comparing passwords...
Password valid: true
 POST /api/auth/login 200 in 7489ms
Login attempt for: chhinhs@gmail.com
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."password", "public"."users"."name", "public"."users"."role", "public"."users"."auth_provider", "public"."users"."telegram_id", "public"."users"."telegram_username", "public"."users"."telegram_photo_url", "public"."users"."is_active", "public"."users"."created_at", "public"."users"."updated_at" FROM "public"."users" WHERE ("public"."users"."email" = $1 AND 1=1) LIMIT $2 OFFSET $3
User found: chhinhs@gmail.com Active: true
Comparing passwords...
Password valid: true
 POST /api/auth/login 200 in 192ms
 ✓ Compiled /api/observations in 194ms
prisma:query SELECT "public"."users"."id", "public"."users"."name", "public"."users"."email", "public"."users"."role" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query BEGIN
Field lengths: { lesson: 1, chapter: 1, subject: 11, title: 27, subTitle: 24 }
prisma:query INSERT INTO "public"."inspection_sessions" ("id","province","province_code","province_name_kh","district","district_code","district_name_kh","commune","commune_code","commune_name_kh","village","village_code","village_name_kh","cluster","school","school_id","name_of_teacher","sex","employment_type","session_time","subject","chapter","lesson","title","sub_title","inspection_date","start_time","end_time","grade","total_male","total_female","total_absent","total_absent_female","level","evaluation_levels","inspector_name","inspector_position","inspector_organization","academic_year","semester","lesson_duration_minutes","inspection_status","general_notes","created_at","updated_at","created_by","is_active","user_id") VALUES ($1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17,$18,$19,$20,$21,$22,$23,$24,$25,$26,$27,$28,$29,$30,$31,$32,$33,$34,$35,$36,$37,$38,$39,$40,$41,$42,$43,$44,$45,$46,$47,$48) RETURNING "public"."inspection_sessions"."id", "public"."inspection_sessions"."province", "public"."inspection_sessions"."province_code", "public"."inspection_sessions"."province_name_kh", "public"."inspection_sessions"."district", "public"."inspection_sessions"."district_code", "public"."inspection_sessions"."district_name_kh", "public"."inspection_sessions"."commune", "public"."inspection_sessions"."commune_code", "public"."inspection_sessions"."commune_name_kh", "public"."inspection_sessions"."village", "public"."inspection_sessions"."village_code", "public"."inspection_sessions"."village_name_kh", "public"."inspection_sessions"."cluster", "public"."inspection_sessions"."school", "public"."inspection_sessions"."school_id", "public"."inspection_sessions"."name_of_teacher", "public"."inspection_sessions"."sex", "public"."inspection_sessions"."employment_type", "public"."inspection_sessions"."session_time", "public"."inspection_sessions"."subject", "public"."inspection_sessions"."chapter", "public"."inspection_sessions"."lesson", "public"."inspection_sessions"."title", "public"."inspection_sessions"."sub_title", "public"."inspection_sessions"."inspection_date", "public"."inspection_sessions"."start_time", "public"."inspection_sessions"."end_time", "public"."inspection_sessions"."grade", "public"."inspection_sessions"."total_male", "public"."inspection_sessions"."total_female", "public"."inspection_sessions"."total_absent", "public"."inspection_sessions"."total_absent_female", "public"."inspection_sessions"."level", "public"."inspection_sessions"."evaluation_levels", "public"."inspection_sessions"."inspector_name", "public"."inspection_sessions"."inspector_position", "public"."inspection_sessions"."inspector_organization", "public"."inspection_sessions"."academic_year", "public"."inspection_sessions"."semester", "public"."inspection_sessions"."lesson_duration_minutes", "public"."inspection_sessions"."inspection_status", "public"."inspection_sessions"."general_notes", "public"."inspection_sessions"."created_at", "public"."inspection_sessions"."updated_at", "public"."inspection_sessions"."created_by", "public"."inspection_sessions"."is_active", "public"."inspection_sessions"."user_id"
prisma:query SELECT "public"."master_fields"."field_id", "public"."master_fields"."indicator_sequence", "public"."master_fields"."indicator_main", "public"."master_fields"."indicator_main_en", "public"."master_fields"."indicator_sub", "public"."master_fields"."indicator_sub_en", "public"."master_fields"."evaluation_level", "public"."master_fields"."scoring_options", "public"."master_fields"."ai_context", "public"."master_fields"."is_active", "public"."master_fields"."created_at", "public"."master_fields"."updated_at" FROM "public"."master_fields" WHERE "public"."master_fields"."indicator_sequence" IN ($1,$2,$3,$4,$5) OFFSET $6
prisma:query INSERT INTO "public"."evaluation_records" ("id","inspection_session_id","field_id","score_value","notes","created_at","created_by") VALUES ($1,$2,$3,$4,$5,$6,$7), ($8,$9,$10,$11,$12,$13,$14), ($15,$16,$17,$18,$19,$20,$21), ($22,$23,$24,$25,$26,$27,$28), ($29,$30,$31,$32,$33,$34,$35)
prisma:query INSERT INTO "public"."student_assessment_sessions" ("assessment_id","inspection_session_id","assessment_type","assessment_date","notes","created_at","updated_at","is_active") VALUES ($1,$2,$3,$4,$5,$6,$7,$8) RETURNING "public"."student_assessment_sessions"."assessment_id", "public"."student_assessment_sessions"."inspection_session_id", "public"."student_assessment_sessions"."assessment_type", "public"."student_assessment_sessions"."assessment_date", "public"."student_assessment_sessions"."notes", "public"."student_assessment_sessions"."created_at", "public"."student_assessment_sessions"."updated_at", "public"."student_assessment_sessions"."is_active"
prisma:query INSERT INTO "public"."assessment_subjects" ("subject_id","assessment_id","subject_name_km","subject_name_en","subject_order","max_score","min_score","created_at") VALUES ($1,$2,$3,$4,$5,$6,$7,$8), ($9,$10,$11,$12,$13,$14,$15,$16)
prisma:query INSERT INTO "public"."assessment_students" ("student_id","assessment_id","student_identifier","student_order","student_name","student_gender","created_at") VALUES ($1,$2,$3,$4,$5,$6,$7), ($8,$9,$10,$11,$12,$13,$14), ($15,$16,$17,$18,$19,$20,$21)
prisma:query INSERT INTO "public"."student_scores" ("score_id","assessment_id","subject_id","student_id","score","created_at","updated_at") VALUES ($1,$2,$3,$4,$5,$6,$7), ($8,$9,$10,$11,$12,$13,$14), ($15,$16,$17,$18,$19,$20,$21), ($22,$23,$24,$25,$26,$27,$28), ($29,$30,$31,$32,$33,$34,$35), ($36,$37,$38,$39,$40,$41,$42)
prisma:query COMMIT
 POST /api/observations 200 in 434ms
 ✓ Compiled /api/observations/[id] in 166ms
prisma:query SELECT "public"."users"."id", "public"."users"."name", "public"."users"."email", "public"."users"."role" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."inspection_sessions"."id", "public"."inspection_sessions"."province", "public"."inspection_sessions"."province_code", "public"."inspection_sessions"."province_name_kh", "public"."inspection_sessions"."district", "public"."inspection_sessions"."district_code", "public"."inspection_sessions"."district_name_kh", "public"."inspection_sessions"."commune", "public"."inspection_sessions"."commune_code", "public"."inspection_sessions"."commune_name_kh", "public"."inspection_sessions"."village", "public"."inspection_sessions"."village_code", "public"."inspection_sessions"."village_name_kh", "public"."inspection_sessions"."cluster", "public"."inspection_sessions"."school", "public"."inspection_sessions"."school_id", "public"."inspection_sessions"."name_of_teacher", "public"."inspection_sessions"."sex", "public"."inspection_sessions"."employment_type", "public"."inspection_sessions"."session_time", "public"."inspection_sessions"."subject", "public"."inspection_sessions"."chapter", "public"."inspection_sessions"."lesson", "public"."inspection_sessions"."title", "public"."inspection_sessions"."sub_title", "public"."inspection_sessions"."inspection_date", "public"."inspection_sessions"."start_time", "public"."inspection_sessions"."end_time", "public"."inspection_sessions"."grade", "public"."inspection_sessions"."total_male", "public"."inspection_sessions"."total_female", "public"."inspection_sessions"."total_absent", "public"."inspection_sessions"."total_absent_female", "public"."inspection_sessions"."level", "public"."inspection_sessions"."evaluation_levels", "public"."inspection_sessions"."inspector_name", "public"."inspection_sessions"."inspector_position", "public"."inspection_sessions"."inspector_organization", "public"."inspection_sessions"."academic_year", "public"."inspection_sessions"."semester", "public"."inspection_sessions"."lesson_duration_minutes", "public"."inspection_sessions"."inspection_status", "public"."inspection_sessions"."general_notes", "public"."inspection_sessions"."created_at", "public"."inspection_sessions"."updated_at", "public"."inspection_sessions"."created_by", "public"."inspection_sessions"."is_active", "public"."inspection_sessions"."user_id" FROM "public"."inspection_sessions" WHERE ("public"."inspection_sessions"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
PUT /api/observations/[id] - Request data keys: [ 'sessionInfo', 'evaluationData' ]
PUT /api/observations/[id] - SessionInfo keys: [
  'province',              'provinceCode',
  'provinceNameKh',        'district',
  'districtCode',          'districtNameKh',
  'commune',               'communeCode',
  'communeNameKh',         'village',
  'villageCode',           'villageNameKh',
  'cluster',               'school',
  'schoolId',              'nameOfTeacher',
  'sex',                   'employmentType',
  'sessionTime',           'subject',
  'chapter',               'lesson',
  'title',                 'subTitle',
  'inspectionDate',        'startTime',
  'endTime',               'grade',
  'totalMale',             'totalFemale',
  'totalAbsent',           'totalAbsentFemale',
  'inspectorName',         'inspectorPosition',
  'inspectorOrganization', 'academicYear',
  'semester',              'lessonDurationMinutes',
  'generalNotes'
]
PUT /api/observations/[id] - EvaluationData keys: [
  'evaluationLevels',
  'indicator_1',
  'indicator_1_comment',
  'indicator_2',
  'indicator_3',
  'indicator_4',
  'indicator_5',
  'indicator_6',
  'indicator_6_comment'
]
PUT /api/observations/[id] - Updating with data: {
  "province": "Phnom Penh",
  "provinceCode": "12",
  "provinceNameKh": "ភ្នំពេញ",
  "district": "Chamkar Mon",
  "districtCode": "1201",
  "districtNameKh": "ចំការមន",
  "commune": "Tonle Bassac",
  "communeCode": "120101",
  "communeNameKh": "ទន្លេបាសាក់",
  "village": "Village 1",
  "villageCode": "12010101",
  "villageNameKh": "ភូមិទី១",
  "cluster": "Cluster A",
  "school": "Test Elementary School",
  "schoolId": 1,
  "nameOfTeacher": "Test Teacher",
  "sex": "Male",
  "employmentType": "Official",
  "sessionTime": "Morning",
  "subject": "Mathematics",
  "chapter": "3",
  "lesson": "5",
  "title": "Basic Arithmetic Operations",
  "subTitle": "Addition and Subtraction",
  "grade": 4,
  "totalMale": 15,
  "totalFemale": 12,
  "totalAbsent": 2,
  "totalAbsentFemale": 1,
  "inspectorName": "Test Inspector",
  "inspectorPosition": "Senior Inspector",
  "inspectorOrganization": "Ministry of Education",
  "academicYear": "2024-2025",
  "semester": 1,
  "lessonDurationMinutes": 90,
  "generalNotes": "Updated notes - API test successful",
  "inspectionDate": "2025-08-09T08:03:36.929Z",
  "startTime": "1970-01-01T01:00:00.000Z",
  "endTime": "1970-01-01T02:30:00.000Z"
}
prisma:query UPDATE "public"."inspection_sessions" SET "province" = $1, "province_code" = $2, "province_name_kh" = $3, "district" = $4, "district_code" = $5, "district_name_kh" = $6, "commune" = $7, "commune_code" = $8, "commune_name_kh" = $9, "village" = $10, "village_code" = $11, "village_name_kh" = $12, "cluster" = $13, "school" = $14, "school_id" = $15, "name_of_teacher" = $16, "sex" = $17, "employment_type" = $18, "session_time" = $19, "subject" = $20, "chapter" = $21, "lesson" = $22, "title" = $23, "sub_title" = $24, "grade" = $25, "total_male" = $26, "total_female" = $27, "total_absent" = $28, "total_absent_female" = $29, "inspector_name" = $30, "inspector_position" = $31, "inspector_organization" = $32, "academic_year" = $33, "semester" = $34, "lesson_duration_minutes" = $35, "general_notes" = $36, "inspection_date" = $37, "start_time" = $38, "end_time" = $39, "updated_at" = $40 WHERE ("public"."inspection_sessions"."id" = $41 AND 1=1) RETURNING "public"."inspection_sessions"."id", "public"."inspection_sessions"."province", "public"."inspection_sessions"."province_code", "public"."inspection_sessions"."province_name_kh", "public"."inspection_sessions"."district", "public"."inspection_sessions"."district_code", "public"."inspection_sessions"."district_name_kh", "public"."inspection_sessions"."commune", "public"."inspection_sessions"."commune_code", "public"."inspection_sessions"."commune_name_kh", "public"."inspection_sessions"."village", "public"."inspection_sessions"."village_code", "public"."inspection_sessions"."village_name_kh", "public"."inspection_sessions"."cluster", "public"."inspection_sessions"."school", "public"."inspection_sessions"."school_id", "public"."inspection_sessions"."name_of_teacher", "public"."inspection_sessions"."sex", "public"."inspection_sessions"."employment_type", "public"."inspection_sessions"."session_time", "public"."inspection_sessions"."subject", "public"."inspection_sessions"."chapter", "public"."inspection_sessions"."lesson", "public"."inspection_sessions"."title", "public"."inspection_sessions"."sub_title", "public"."inspection_sessions"."inspection_date", "public"."inspection_sessions"."start_time", "public"."inspection_sessions"."end_time", "public"."inspection_sessions"."grade", "public"."inspection_sessions"."total_male", "public"."inspection_sessions"."total_female", "public"."inspection_sessions"."total_absent", "public"."inspection_sessions"."total_absent_female", "public"."inspection_sessions"."level", "public"."inspection_sessions"."evaluation_levels", "public"."inspection_sessions"."inspector_name", "public"."inspection_sessions"."inspector_position", "public"."inspection_sessions"."inspector_organization", "public"."inspection_sessions"."academic_year", "public"."inspection_sessions"."semester", "public"."inspection_sessions"."lesson_duration_minutes", "public"."inspection_sessions"."inspection_status", "public"."inspection_sessions"."general_notes", "public"."inspection_sessions"."created_at", "public"."inspection_sessions"."updated_at", "public"."inspection_sessions"."created_by", "public"."inspection_sessions"."is_active", "public"."inspection_sessions"."user_id"
Processing evaluation indicators...
prisma:query DELETE FROM "public"."evaluation_records" WHERE "public"."evaluation_records"."inspection_session_id" = $1
prisma:query SELECT "public"."master_fields"."field_id", "public"."master_fields"."indicator_sequence", "public"."master_fields"."indicator_main", "public"."master_fields"."indicator_main_en", "public"."master_fields"."indicator_sub", "public"."master_fields"."indicator_sub_en", "public"."master_fields"."evaluation_level", "public"."master_fields"."scoring_options", "public"."master_fields"."ai_context", "public"."master_fields"."is_active", "public"."master_fields"."created_at", "public"."master_fields"."updated_at" FROM "public"."master_fields" WHERE ("public"."master_fields"."indicator_sequence" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."master_fields"."field_id", "public"."master_fields"."indicator_sequence", "public"."master_fields"."indicator_main", "public"."master_fields"."indicator_main_en", "public"."master_fields"."indicator_sub", "public"."master_fields"."indicator_sub_en", "public"."master_fields"."evaluation_level", "public"."master_fields"."scoring_options", "public"."master_fields"."ai_context", "public"."master_fields"."is_active", "public"."master_fields"."created_at", "public"."master_fields"."updated_at" FROM "public"."master_fields" WHERE ("public"."master_fields"."indicator_sequence" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."master_fields"."field_id", "public"."master_fields"."indicator_sequence", "public"."master_fields"."indicator_main", "public"."master_fields"."indicator_main_en", "public"."master_fields"."indicator_sub", "public"."master_fields"."indicator_sub_en", "public"."master_fields"."evaluation_level", "public"."master_fields"."scoring_options", "public"."master_fields"."ai_context", "public"."master_fields"."is_active", "public"."master_fields"."created_at", "public"."master_fields"."updated_at" FROM "public"."master_fields" WHERE ("public"."master_fields"."indicator_sequence" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."master_fields"."field_id", "public"."master_fields"."indicator_sequence", "public"."master_fields"."indicator_main", "public"."master_fields"."indicator_main_en", "public"."master_fields"."indicator_sub", "public"."master_fields"."indicator_sub_en", "public"."master_fields"."evaluation_level", "public"."master_fields"."scoring_options", "public"."master_fields"."ai_context", "public"."master_fields"."is_active", "public"."master_fields"."created_at", "public"."master_fields"."updated_at" FROM "public"."master_fields" WHERE ("public"."master_fields"."indicator_sequence" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."master_fields"."field_id", "public"."master_fields"."indicator_sequence", "public"."master_fields"."indicator_main", "public"."master_fields"."indicator_main_en", "public"."master_fields"."indicator_sub", "public"."master_fields"."indicator_sub_en", "public"."master_fields"."evaluation_level", "public"."master_fields"."scoring_options", "public"."master_fields"."ai_context", "public"."master_fields"."is_active", "public"."master_fields"."created_at", "public"."master_fields"."updated_at" FROM "public"."master_fields" WHERE ("public"."master_fields"."indicator_sequence" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."master_fields"."field_id", "public"."master_fields"."indicator_sequence", "public"."master_fields"."indicator_main", "public"."master_fields"."indicator_main_en", "public"."master_fields"."indicator_sub", "public"."master_fields"."indicator_sub_en", "public"."master_fields"."evaluation_level", "public"."master_fields"."scoring_options", "public"."master_fields"."ai_context", "public"."master_fields"."is_active", "public"."master_fields"."created_at", "public"."master_fields"."updated_at" FROM "public"."master_fields" WHERE ("public"."master_fields"."indicator_sequence" = $1 AND 1=1) LIMIT $2 OFFSET $3
Creating evaluation records: 6
prisma:query BEGIN
prisma:query INSERT INTO "public"."evaluation_records" ("id","inspection_session_id","field_id","score_value","notes","created_at","created_by") VALUES ($1,$2,$3,$4,$5,$6,$7), ($8,$9,$10,$11,$12,$13,$14), ($15,$16,$17,$18,$19,$20,$21), ($22,$23,$24,$25,$26,$27,$28), ($29,$30,$31,$32,$33,$34,$35), ($36,$37,$38,$39,$40,$41,$42)
prisma:query COMMIT
Observation updated successfully: cme3yx7cj0001jjkfziby0a78
 PUT /api/observations/cme3yx7cj0001jjkfziby0a78 200 in 1412ms
prisma:query SELECT "public"."users"."id", "public"."users"."name", "public"."users"."email", "public"."users"."role" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."inspection_sessions"."id", "public"."inspection_sessions"."province", "public"."inspection_sessions"."province_code", "public"."inspection_sessions"."province_name_kh", "public"."inspection_sessions"."district", "public"."inspection_sessions"."district_code", "public"."inspection_sessions"."district_name_kh", "public"."inspection_sessions"."commune", "public"."inspection_sessions"."commune_code", "public"."inspection_sessions"."commune_name_kh", "public"."inspection_sessions"."village", "public"."inspection_sessions"."village_code", "public"."inspection_sessions"."village_name_kh", "public"."inspection_sessions"."cluster", "public"."inspection_sessions"."school", "public"."inspection_sessions"."school_id", "public"."inspection_sessions"."name_of_teacher", "public"."inspection_sessions"."sex", "public"."inspection_sessions"."employment_type", "public"."inspection_sessions"."session_time", "public"."inspection_sessions"."subject", "public"."inspection_sessions"."chapter", "public"."inspection_sessions"."lesson", "public"."inspection_sessions"."title", "public"."inspection_sessions"."sub_title", "public"."inspection_sessions"."inspection_date", "public"."inspection_sessions"."start_time", "public"."inspection_sessions"."end_time", "public"."inspection_sessions"."grade", "public"."inspection_sessions"."total_male", "public"."inspection_sessions"."total_female", "public"."inspection_sessions"."total_absent", "public"."inspection_sessions"."total_absent_female", "public"."inspection_sessions"."level", "public"."inspection_sessions"."evaluation_levels", "public"."inspection_sessions"."inspector_name", "public"."inspection_sessions"."inspector_position", "public"."inspection_sessions"."inspector_organization", "public"."inspection_sessions"."academic_year", "public"."inspection_sessions"."semester", "public"."inspection_sessions"."lesson_duration_minutes", "public"."inspection_sessions"."inspection_status", "public"."inspection_sessions"."general_notes", "public"."inspection_sessions"."created_at", "public"."inspection_sessions"."updated_at", "public"."inspection_sessions"."created_by", "public"."inspection_sessions"."is_active", "public"."inspection_sessions"."user_id" FROM "public"."inspection_sessions" WHERE ("public"."inspection_sessions"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."evaluation_records"."id", "public"."evaluation_records"."inspection_session_id", "public"."evaluation_records"."field_id", "public"."evaluation_records"."score_value", "public"."evaluation_records"."notes", "public"."evaluation_records"."created_at", "public"."evaluation_records"."created_by" FROM "public"."evaluation_records" WHERE "public"."evaluation_records"."inspection_session_id" IN ($1) OFFSET $2
prisma:query SELECT "public"."master_fields"."field_id", "public"."master_fields"."indicator_sequence", "public"."master_fields"."indicator_main", "public"."master_fields"."indicator_main_en", "public"."master_fields"."indicator_sub", "public"."master_fields"."indicator_sub_en", "public"."master_fields"."evaluation_level", "public"."master_fields"."scoring_options", "public"."master_fields"."ai_context", "public"."master_fields"."is_active", "public"."master_fields"."created_at", "public"."master_fields"."updated_at" FROM "public"."master_fields" WHERE "public"."master_fields"."field_id" IN ($1,$2,$3,$4,$5,$6) OFFSET $7
prisma:query SELECT "public"."student_assessment_sessions"."assessment_id", "public"."student_assessment_sessions"."inspection_session_id", "public"."student_assessment_sessions"."assessment_type", "public"."student_assessment_sessions"."assessment_date", "public"."student_assessment_sessions"."notes", "public"."student_assessment_sessions"."created_at", "public"."student_assessment_sessions"."updated_at", "public"."student_assessment_sessions"."is_active" FROM "public"."student_assessment_sessions" WHERE "public"."student_assessment_sessions"."inspection_session_id" IN ($1) OFFSET $2
prisma:query SELECT "public"."assessment_subjects"."subject_id", "public"."assessment_subjects"."assessment_id", "public"."assessment_subjects"."subject_name_km", "public"."assessment_subjects"."subject_name_en", "public"."assessment_subjects"."subject_order", "public"."assessment_subjects"."max_score", "public"."assessment_subjects"."min_score", "public"."assessment_subjects"."created_at" FROM "public"."assessment_subjects" WHERE "public"."assessment_subjects"."assessment_id" IN ($1) ORDER BY "public"."assessment_subjects"."subject_order" ASC OFFSET $2
prisma:query SELECT "public"."assessment_students"."student_id", "public"."assessment_students"."assessment_id", "public"."assessment_students"."student_identifier", "public"."assessment_students"."student_order", "public"."assessment_students"."student_name", "public"."assessment_students"."student_gender", "public"."assessment_students"."created_at" FROM "public"."assessment_students" WHERE "public"."assessment_students"."assessment_id" IN ($1) ORDER BY "public"."assessment_students"."student_order" ASC OFFSET $2
prisma:query SELECT "public"."student_scores"."score_id", "public"."student_scores"."assessment_id", "public"."student_scores"."subject_id", "public"."student_scores"."student_id", "public"."student_scores"."score", "public"."student_scores"."score_text", "public"."student_scores"."notes", "public"."student_scores"."created_at", "public"."student_scores"."updated_at" FROM "public"."student_scores" WHERE "public"."student_scores"."assessment_id" IN ($1) OFFSET $2
prisma:query SELECT "public"."users"."id", "public"."users"."name", "public"."users"."email", "public"."users"."role" FROM "public"."users" WHERE "public"."users"."id" IN ($1) OFFSET $2
prisma:query 
      SELECT evaluation_levels 
      FROM inspection_sessions 
      WHERE id = $1
    
 GET /api/observations/cme3yx7cj0001jjkfziby0a78 200 in 203ms
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."password", "public"."users"."name", "public"."users"."role", "public"."users"."auth_provider", "public"."users"."telegram_id", "public"."users"."telegram_username", "public"."users"."telegram_photo_url", "public"."users"."is_active", "public"."users"."created_at", "public"."users"."updated_at" FROM "public"."users" WHERE ("public"."users"."email" = $1 AND 1=1) LIMIT $2 OFFSET $3
 POST /api/auth/login 200 in 607ms
prisma:query SELECT "public"."users"."id", "public"."users"."name", "public"."users"."email", "public"."users"."role" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."master_fields"."field_id", "public"."master_fields"."indicator_sequence", "public"."master_fields"."indicator_main", "public"."master_fields"."indicator_main_en", "public"."master_fields"."indicator_sub", "public"."master_fields"."indicator_sub_en", "public"."master_fields"."evaluation_level", "public"."master_fields"."scoring_options", "public"."master_fields"."ai_context", "public"."master_fields"."is_active", "public"."master_fields"."created_at", "public"."master_fields"."updated_at" FROM "public"."master_fields" WHERE "public"."master_fields"."indicator_sequence" IN ($1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17,$18,$19,$20,$21,$22) OFFSET $23
prisma:query BEGIN
Field lengths: { lesson: 2, chapter: 2, subject: 10, title: 2, subTitle: 2 }
prisma:query INSERT INTO "public"."inspection_sessions" ("id","province","province_code","province_name_kh","district","district_code","district_name_kh","commune","commune_code","commune_name_kh","village","village_code","village_name_kh","cluster","school","school_id","name_of_teacher","sex","employment_type","session_time","subject","chapter","lesson","title","sub_title","inspection_date","start_time","end_time","grade","total_male","total_female","total_absent","total_absent_female","level","evaluation_levels","inspector_name","inspector_position","inspector_organization","academic_year","semester","lesson_duration_minutes","inspection_status","general_notes","created_at","updated_at","created_by","is_active","user_id") VALUES ($1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17,$18,$19,$20,$21,$22,$23,$24,$25,$26,$27,$28,$29,$30,$31,$32,$33,$34,$35,$36,$37,$38,$39,$40,$41,$42,$43,$44,$45,$46,$47,$48) RETURNING "public"."inspection_sessions"."id", "public"."inspection_sessions"."province", "public"."inspection_sessions"."province_code", "public"."inspection_sessions"."province_name_kh", "public"."inspection_sessions"."district", "public"."inspection_sessions"."district_code", "public"."inspection_sessions"."district_name_kh", "public"."inspection_sessions"."commune", "public"."inspection_sessions"."commune_code", "public"."inspection_sessions"."commune_name_kh", "public"."inspection_sessions"."village", "public"."inspection_sessions"."village_code", "public"."inspection_sessions"."village_name_kh", "public"."inspection_sessions"."cluster", "public"."inspection_sessions"."school", "public"."inspection_sessions"."school_id", "public"."inspection_sessions"."name_of_teacher", "public"."inspection_sessions"."sex", "public"."inspection_sessions"."employment_type", "public"."inspection_sessions"."session_time", "public"."inspection_sessions"."subject", "public"."inspection_sessions"."chapter", "public"."inspection_sessions"."lesson", "public"."inspection_sessions"."title", "public"."inspection_sessions"."sub_title", "public"."inspection_sessions"."inspection_date", "public"."inspection_sessions"."start_time", "public"."inspection_sessions"."end_time", "public"."inspection_sessions"."grade", "public"."inspection_sessions"."total_male", "public"."inspection_sessions"."total_female", "public"."inspection_sessions"."total_absent", "public"."inspection_sessions"."total_absent_female", "public"."inspection_sessions"."level", "public"."inspection_sessions"."evaluation_levels", "public"."inspection_sessions"."inspector_name", "public"."inspection_sessions"."inspector_position", "public"."inspection_sessions"."inspector_organization", "public"."inspection_sessions"."academic_year", "public"."inspection_sessions"."semester", "public"."inspection_sessions"."lesson_duration_minutes", "public"."inspection_sessions"."inspection_status", "public"."inspection_sessions"."general_notes", "public"."inspection_sessions"."created_at", "public"."inspection_sessions"."updated_at", "public"."inspection_sessions"."created_by", "public"."inspection_sessions"."is_active", "public"."inspection_sessions"."user_id"
prisma:query INSERT INTO "public"."evaluation_records" ("id","inspection_session_id","field_id","score_value","notes","created_at","created_by") VALUES ($1,$2,$3,$4,$5,$6,$7), ($8,$9,$10,$11,$12,$13,$14), ($15,$16,$17,$18,$19,$20,$21), ($22,$23,$24,$25,$26,$27,$28), ($29,$30,$31,$32,$33,$34,$35), ($36,$37,$38,$39,$40,$41,$42), ($43,$44,$45,$46,$47,$48,$49), ($50,$51,$52,$53,$54,$55,$56), ($57,$58,$59,$60,$61,$62,$63), ($64,$65,$66,$67,$68,$69,$70), ($71,$72,$73,$74,$75,$76,$77), ($78,$79,$80,$81,$82,$83,$84), ($85,$86,$87,$88,$89,$90,$91), ($92,$93,$94,$95,$96,$97,$98), ($99,$100,$101,$102,$103,$104,$105), ($106,$107,$108,$109,$110,$111,$112), ($113,$114,$115,$116,$117,$118,$119), ($120,$121,$122,$123,$124,$125,$126), ($127,$128,$129,$130,$131,$132,$133), ($134,$135,$136,$137,$138,$139,$140), ($141,$142,$143,$144,$145,$146,$147), ($148,$149,$150,$151,$152,$153,$154)
prisma:query INSERT INTO "public"."student_assessment_sessions" ("assessment_id","inspection_session_id","assessment_type","assessment_date","notes","created_at","updated_at","is_active") VALUES ($1,$2,$3,$4,$5,$6,$7,$8) RETURNING "public"."student_assessment_sessions"."assessment_id", "public"."student_assessment_sessions"."inspection_session_id", "public"."student_assessment_sessions"."assessment_type", "public"."student_assessment_sessions"."assessment_date", "public"."student_assessment_sessions"."notes", "public"."student_assessment_sessions"."created_at", "public"."student_assessment_sessions"."updated_at", "public"."student_assessment_sessions"."is_active"
prisma:query INSERT INTO "public"."assessment_subjects" ("subject_id","assessment_id","subject_name_km","subject_name_en","subject_order","max_score","min_score","created_at") VALUES ($1,$2,$3,$4,$5,$6,$7,$8), ($9,$10,$11,$12,$13,$14,$15,$16), ($17,$18,$19,$20,$21,$22,$23,$24)
prisma:query INSERT INTO "public"."assessment_students" ("student_id","assessment_id","student_identifier","student_order","student_name","student_gender","created_at") VALUES ($1,$2,$3,$4,$5,$6,$7), ($8,$9,$10,$11,$12,$13,$14), ($15,$16,$17,$18,$19,$20,$21), ($22,$23,$24,$25,$26,$27,$28), ($29,$30,$31,$32,$33,$34,$35)
prisma:query INSERT INTO "public"."student_scores" ("score_id","assessment_id","subject_id","student_id","score","created_at","updated_at") VALUES ($1,$2,$3,$4,$5,$6,$7), ($8,$9,$10,$11,$12,$13,$14), ($15,$16,$17,$18,$19,$20,$21), ($22,$23,$24,$25,$26,$27,$28), ($29,$30,$31,$32,$33,$34,$35), ($36,$37,$38,$39,$40,$41,$42), ($43,$44,$45,$46,$47,$48,$49), ($50,$51,$52,$53,$54,$55,$56), ($57,$58,$59,$60,$61,$62,$63), ($64,$65,$66,$67,$68,$69,$70), ($71,$72,$73,$74,$75,$76,$77), ($78,$79,$80,$81,$82,$83,$84), ($85,$86,$87,$88,$89,$90,$91), ($92,$93,$94,$95,$96,$97,$98), ($99,$100,$101,$102,$103,$104,$105)
prisma:query COMMIT
 POST /api/observations 200 in 363ms
prisma:query SELECT "public"."users"."id", "public"."users"."name", "public"."users"."email", "public"."users"."role" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."inspection_sessions"."id", "public"."inspection_sessions"."province", "public"."inspection_sessions"."province_code", "public"."inspection_sessions"."province_name_kh", "public"."inspection_sessions"."district", "public"."inspection_sessions"."district_code", "public"."inspection_sessions"."district_name_kh", "public"."inspection_sessions"."commune", "public"."inspection_sessions"."commune_code", "public"."inspection_sessions"."commune_name_kh", "public"."inspection_sessions"."village", "public"."inspection_sessions"."village_code", "public"."inspection_sessions"."village_name_kh", "public"."inspection_sessions"."cluster", "public"."inspection_sessions"."school", "public"."inspection_sessions"."school_id", "public"."inspection_sessions"."name_of_teacher", "public"."inspection_sessions"."sex", "public"."inspection_sessions"."employment_type", "public"."inspection_sessions"."session_time", "public"."inspection_sessions"."subject", "public"."inspection_sessions"."chapter", "public"."inspection_sessions"."lesson", "public"."inspection_sessions"."title", "public"."inspection_sessions"."sub_title", "public"."inspection_sessions"."inspection_date", "public"."inspection_sessions"."start_time", "public"."inspection_sessions"."end_time", "public"."inspection_sessions"."grade", "public"."inspection_sessions"."total_male", "public"."inspection_sessions"."total_female", "public"."inspection_sessions"."total_absent", "public"."inspection_sessions"."total_absent_female", "public"."inspection_sessions"."level", "public"."inspection_sessions"."evaluation_levels", "public"."inspection_sessions"."inspector_name", "public"."inspection_sessions"."inspector_position", "public"."inspection_sessions"."inspector_organization", "public"."inspection_sessions"."academic_year", "public"."inspection_sessions"."semester", "public"."inspection_sessions"."lesson_duration_minutes", "public"."inspection_sessions"."inspection_status", "public"."inspection_sessions"."general_notes", "public"."inspection_sessions"."created_at", "public"."inspection_sessions"."updated_at", "public"."inspection_sessions"."created_by", "public"."inspection_sessions"."is_active", "public"."inspection_sessions"."user_id" FROM "public"."inspection_sessions" WHERE ("public"."inspection_sessions"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."evaluation_records"."id", "public"."evaluation_records"."inspection_session_id", "public"."evaluation_records"."field_id", "public"."evaluation_records"."score_value", "public"."evaluation_records"."notes", "public"."evaluation_records"."created_at", "public"."evaluation_records"."created_by" FROM "public"."evaluation_records" WHERE "public"."evaluation_records"."inspection_session_id" IN ($1) OFFSET $2
prisma:query SELECT "public"."master_fields"."field_id", "public"."master_fields"."indicator_sequence", "public"."master_fields"."indicator_main", "public"."master_fields"."indicator_main_en", "public"."master_fields"."indicator_sub", "public"."master_fields"."indicator_sub_en", "public"."master_fields"."evaluation_level", "public"."master_fields"."scoring_options", "public"."master_fields"."ai_context", "public"."master_fields"."is_active", "public"."master_fields"."created_at", "public"."master_fields"."updated_at" FROM "public"."master_fields" WHERE "public"."master_fields"."field_id" IN ($1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17,$18,$19,$20,$21,$22) OFFSET $23
prisma:query SELECT "public"."student_assessment_sessions"."assessment_id", "public"."student_assessment_sessions"."inspection_session_id", "public"."student_assessment_sessions"."assessment_type", "public"."student_assessment_sessions"."assessment_date", "public"."student_assessment_sessions"."notes", "public"."student_assessment_sessions"."created_at", "public"."student_assessment_sessions"."updated_at", "public"."student_assessment_sessions"."is_active" FROM "public"."student_assessment_sessions" WHERE "public"."student_assessment_sessions"."inspection_session_id" IN ($1) OFFSET $2
prisma:query SELECT "public"."assessment_subjects"."subject_id", "public"."assessment_subjects"."assessment_id", "public"."assessment_subjects"."subject_name_km", "public"."assessment_subjects"."subject_name_en", "public"."assessment_subjects"."subject_order", "public"."assessment_subjects"."max_score", "public"."assessment_subjects"."min_score", "public"."assessment_subjects"."created_at" FROM "public"."assessment_subjects" WHERE "public"."assessment_subjects"."assessment_id" IN ($1) ORDER BY "public"."assessment_subjects"."subject_order" ASC OFFSET $2
prisma:query SELECT "public"."assessment_students"."student_id", "public"."assessment_students"."assessment_id", "public"."assessment_students"."student_identifier", "public"."assessment_students"."student_order", "public"."assessment_students"."student_name", "public"."assessment_students"."student_gender", "public"."assessment_students"."created_at" FROM "public"."assessment_students" WHERE "public"."assessment_students"."assessment_id" IN ($1) ORDER BY "public"."assessment_students"."student_order" ASC OFFSET $2
prisma:query SELECT "public"."student_scores"."score_id", "public"."student_scores"."assessment_id", "public"."student_scores"."subject_id", "public"."student_scores"."student_id", "public"."student_scores"."score", "public"."student_scores"."score_text", "public"."student_scores"."notes", "public"."student_scores"."created_at", "public"."student_scores"."updated_at" FROM "public"."student_scores" WHERE "public"."student_scores"."assessment_id" IN ($1) OFFSET $2
prisma:query SELECT "public"."users"."id", "public"."users"."name", "public"."users"."email", "public"."users"."role" FROM "public"."users" WHERE "public"."users"."id" IN ($1) OFFSET $2
prisma:query 
      SELECT evaluation_levels 
      FROM inspection_sessions 
      WHERE id = $1
    
 GET /api/observations/cme3z5gjm0003jjkfjq3vvh04 200 in 349ms
